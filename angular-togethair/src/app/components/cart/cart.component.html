<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>


<!-- Modal -->
<div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">


  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">


        <h5 class="modal-title" id="exampleModalLabel">Book flight to {{bookFlight.destinationAirport.cityName}}</h5>

        <div>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>


        </div>
      </div>
      <div class="modal-body">


        <!--Grid row-->
        <div class="row">

          <!--Grid column-->
          <div class="col-lg-8">

            <!-- Card -->
            <div class="card wish-list mb-3">
              <div class="card-body">

                <h5 class="mb-4">Flight Details</h5>

                <div class="row mb-4">
                  <div class="col-md-5 col-lg-3 col-xl-3">
                    <div class="view zoom overlay z-depth-1 rounded mb-3 mb-md-0">
                      <img class="img-fluid w-100" src="assets/cover.jpg"
                           alt="{{bookFlight.destinationAirport.cityName}}">
                    </div>
                  </div>
                  <div class="col-md-7 col-lg-9 col-xl-9">
                    <div>
                      <div class="d-flex justify-content-between">
                        <div class="w-100">
                        </div>


                        <div class="flex-shrink-1 w-100">


                          <div class="btn-group btn-group-sm mb-3">
                            <a href="#" role="button" class="btn btn-light btn-xs" id="label-btn"
                               aria-disabled="true">Adults</a>
                            <button type="button" class="btn btn-outline-dark btn-xs"
                                    (click)="adultDec()"><strong>-</strong></button>
                            <input type="number" class="form-control" inputmode="numeric" [value]="grownups"
                                   [(ngModel)]="grownups" (ngModelChange)="onNumberChange()" min="0">
                            <button type="button" class="btn btn-outline-dark btn-xs"
                                    (click)="adultInc()"><strong>+</strong></button>
                          </div>


                          <div class="btn-group btn-group-sm">
                            <a href="#" role="button" class="btn btn-light btn-xs" id="label-btn"
                               aria-disabled="true">Children</a>
                            <button type="button" class="btn btn-outline-dark btn-xs"
                                    (click)="childDec()"><strong>-</strong></button>
                            <input type="number" class="form-control" inputmode="numeric" [value]="kids"
                                   [(ngModel)]="kids" (ngModelChange)="onNumberChange()" min="0">
                            <button type="button" class="btn btn-outline-dark btn-xs"
                                    (click)="childInc()"><strong>+</strong></button>
                          </div>


                        </div>

                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mb-4">
                  <div class="col-xs-12">
                    <h5 class="mb-3"><span *ngIf="bookFlight.roundtrip; else onewayBlock">Roundtrip </span>
                      <ng-template #onewayBlock>One-way</ng-template>
                      Flight to
                      {{bookFlight.destinationAirport.cityName}}
                    </h5>
                    <p><strong>From:</strong> {{bookFlight.departureAirport.name}}
                      ({{bookFlight.departureAirport.code}}) in {{bookFlight.departureAirport.cityName}},
                      {{bookFlight.departureAirport.countryName}} at {{bookFlight.departureTime | date:'short'}}</p>
                    <p class="mb-3"><strong>Flight Duration:</strong> {{bookFlight.flightDuration}} hours</p>
                    <p class="mb-3"><strong>To:</strong> {{bookFlight.destinationAirport.name}}
                      ({{bookFlight.destinationAirport.code}}) in {{bookFlight.destinationAirport.cityName}},
                      {{bookFlight.destinationAirport.countryName}}</p>
                    <p><strong>Airline:</strong> {{bookFlight.airline.name | uppercase}}</p>
                  </div>
                </div>

                <div class="row mb-4" *ngIf="bookFlight.roundtrip">
                  <div class="col-xs-12">
                    <hr>
                    <h5 class="mb-3">Return Flight</h5>
                    <p><strong>From:</strong> {{bookFlight.destinationAirport.name}}
                      ({{bookFlight.destinationAirport.code}}) in {{bookFlight.destinationAirport.cityName}},
                      {{bookFlight.destinationAirport.countryName}} at {{bookFlight.destinationTime | date:'short'}}
                    </p>
                    <p class="mb-3"><strong>Flight Duration:</strong> {{bookFlight.flightDuration}} hours</p>
                    <p class="mb-3"><strong>To:</strong> {{bookFlight.departureAirport.name}}
                      ({{bookFlight.departureAirport.code}}) in {{bookFlight.departureAirport.cityName}},
                      {{bookFlight.departureAirport.countryName}}</p>
                    <p><strong>Airline:</strong> {{bookFlight.airline.name | uppercase}}</p>
                  </div>
                </div>

                <p class="text-primary mb-0"><i class="fas fa-info-circle mr-1"></i> Act fast, this
                  flight has been booked <span style="color: red;">{{randBookers}}</span> times in the last 15 minutes,
                  and seats are limited.</p>

              </div>
            </div>

            <div class="card mb-3">
              <div class="card-body">

                <h5 class="mb-4">We accept</h5>

                <img class="mr-2" width="45px"
                     src="https://mdbootstrap.com/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg"
                     alt="Visa" style="margin-right:10px;">
                <img class="mr-2" width="45px"
                     src="https://mdbootstrap.com/wp-content/plugins/woocommerce-gateway-stripe/assets/images/amex.svg"
                     alt="American Express" style="margin-right:10px;">
                <img class="mr-2" width="45px"
                     src="https://mdbootstrap.com/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg"
                     alt="Mastercard" style="margin-right:10px;">
                <img class="mr-2" width="45px" src="https://www.drupal.org/files/project-images/paypal_logo.jpg"
                     alt="PayPal acceptance mark" style="margin-right:10px;">

                <!-- Card -->


              </div>
              <!-- Card -->

            </div>

          </div>


          <!--Grid column-->
          <div class="col-lg-4">

            <!-- Card -->
            <div class="card mb-3">
              <div class="card-body">

                <h5 class="mb-3">Booking Overview</h5>

                <ul class="list-group list-group-flush">


                  <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                    <span>€{{bookFlight.price| number:'1.2-2'}}/pp for {{bookFlight.adults}} Adult<span
                      *ngIf="bookFlight.adults>1">s</span>:</span>
                    <span>€{{adultPrice| number:'1.2-2'}}</span>
                  </li>

                  <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span>€{{bookFlight.price*.8 | number:'1.2-2'}}/pp for {{bookFlight.children}} Child<span
                      *ngIf="bookFlight.children>1">ren</span>:</span>
                    <span>€{{childPrice| number:'1.2-2'}}</span>
                  </li>

                  <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    Booking Fee - 5%:
                    <span>€{{bookingFee| number:'1.2-2'}}</span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                    <div>
                      <strong>Total amount</strong>
                      <strong>
                        <p class="mb-0">(including VAT)</p>
                      </strong>
                    </div>
                    <span><strong>€{{totalPrice| number:'1.2-2'}}</strong></span>
                  </li>
                </ul>


              </div>
            </div>
            <!-- Card -->


            <div style="margin-top:40px;">


              <div class="container main">
                <div class="row">
                  <div>
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <div class="row">
                          <h3 class="text-center" (click)="didItChange()">Payment Details</h3>
                        </div>
                      </div>
                      <form #cardDetails="ngForm" (ngSubmit)="processPayment(cardDetails)" name="cardDetails">
                        <div class="panel-body">
                          <form role="form">
                            <div class="row">
                              <div class="col-xs-12">
                                <div class="form-group" style="margin-top:15px;">
                                  <label for="cardNumber">CARD NUMBER</label>
                                  <div class="input-group">
                                    <input [(ngModel)]="cardNumber" name="cardNumber" style="margin-top:4px;" type="tel"
                                           class="form-control"
                                           placeholder="Valid Card Number"
                                           id="cardNumber"
                                           required/>
                                    <span style="margin-left:4px;margin-top:9px;" class="input-group-addon"><span
                                      class="fa fa-credit-card"></span></span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-xs-7 col-md-7">
                                <div class="form-group" style="margin-top:15px;">
                                  <label for="expiration"><span class="hidden-xs">EXPIRATION</span><span
                                    class="visible-xs-inline">EXP</span> DATE</label>
                                  <input [(ngModel)]="expiration" name="expiration" style="margin-top:4px;" type="tel"
                                         class="form-control"
                                         placeholder="MM / YY"
                                         id="expiration"
                                         required/>
                                </div>
                              </div>
                              <div class="col-xs-5 col-md-5 pull-right">
                                <div class="form-group" style="margin-top:15px;">
                                  <label for="cvCode">CV CODE</label>
                                  <input [(ngModel)]="cvCode" name="cvCode" style="margin-top:4px;" type="tel" class="form-control"
                                         placeholder="CVC"
                                         id="cvCode"
                                         required/>
                                </div>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-xs-12" style="margin-top:15px;">
                                <div class="form-group">
                                  <label for="cardOwner">CARD OWNER</label>
                                  <input [(ngModel)]="cardOwner" name="cardOwner" style="margin-top:4px;" type="text"
                                         class="form-control"
                                         placeholder="Card Owner Name"
                                         id="cardOwner"
                                         required/>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                        <div class="panel-footer">
                          <div class="row">
                            <div class="col-xs-12" style="margin-top:15px;">
                              <button style="background-color: #5e2ced" class="btn btn-warning btn-lg btn-block" type="submit"
                                      data-bs-dismiss="modal" [disabled]="cardDetails.invalid">Process payment
                              </button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

